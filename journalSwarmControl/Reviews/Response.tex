\documentclass[conference, onecolumn, 10pt]{../IEEEtran}
\IEEEoverridecommandlockouts
\usepackage{times}


\usepackage{microtype,xparse,tcolorbox}
\usepackage{mathtools, cuted}
\usepackage{todonotes}
\usepackage{graphicx}
\usepackage{wrapfig}
\usepackage{hyperref}
\providecommand{\norm}[1]{\left\lVert#1\right\rVert}

\newcounter{reviewer}
\setcounter{reviewer}{0}
\newcounter{point}[reviewer]
\setcounter{point}{0}

\setlength\parindent{0pt}

\renewcommand{\thepoint}{[R\,\thereviewer.\arabic{point}] } 

\newcommand{\response}[1]{\refstepcounter{point}  \smallbreak \noindent
	\hangindent=3.5em
	\hangafter=1
	\thepoint \space ``\textcolor{blue}{#1}" \par\smallskip}

\newcommand{\letter}[2]{\vspace*{\fill} 
	
	\begin{quote}  
		
		\includegraphics[width=8cm]{engineeringLogo.eps}
			
		
	
		\begin{flushright}
		Aaron T.\ Becker\\Department of Electrical Engineering\\University of Houston\\Houston, TX 77004, USA\\Email: atbecker@central.uh.edu\\Web: youTube.com/aabecker5\\
		
		\today \vspace{2cm} \\
		\end{flushright}
		
		#1\medskip\\ 
		\medskip\\
		Dear #2 Editorial Office,\medskip\\
		Please find attached the revised paper, #1,
		along with the document containing a response to the reviewers. We are grateful to the reviewers for helping us improve our manuscript through their comments and questions. Please let us know if further information is required.\medskip\\
		
		Sincerely,\\
		
	
			\includegraphics[width=4cm]{SignatureAaronTBeckerWhite.png}
			\medskip\\
		Aaron T.\ Becker (on behalf of all the authors) 
	\end{quote}
	\vspace*{\fill}
	\break }

\NewDocumentCommand \Reviewer { m } {
	\stepcounter{reviewer}
	\subsection*{Comments~by~Reviewer~#1}
}

\begin{document}
	\letter{\emph{Steering a Particle Swarm Using Global Inputs and Swarm Statistics}}{IEEE Transactions on Robotics}
	
	\section*{Response to Reviewers}
	In the following document, weâ have provided detailed responses to the comments and questions of the reviewers. Comments and questions by reviewers are in \textcolor{blue}{blue}, our responses are in black.
	
	
	
	\emph{Comments by Associate Editor}
	\response{The paper proposes a theoretical contribution in the swarm robotics
field. Controllability properties are obtained for a swarm of robots
subject to common inputs and it results that only two variables are
controllable. In the paper is is also shown that variance is
stabilizable. The idea of controlling mean and variance comes from a
large set of online tests performed by humans controlling swarms in
manipulation activities and collected by the authors. Based on the
theoretical results, a hybrid mean and variance control law is obtained
to manipulate objects in a scenario with obstacles. Both simulation
and, more importantly, experiment results are reported.}
Thank you.

\response{The paper deals with an interesting problem for the community and it is
very well written. Some improvements may be achieved following
reviewers comments in providing more insights or details on several
aspects. For example, as reported by Reviewer 3, simulation scenarios
could be of higher complexity with respect to the shown experiments so
to prove other potentialities of the proposed approach. In addition to the corrections requested by reviewers I suggest also
the following:}

 To illustrate the flexibility of the algorithm we tested two additional workspaces, \emph{{\sffamily E}-shaped} and  \emph{Spiral}, without changing the algorithm. 
 More complicated workspaces could be generated by composing these workspaces. See Figs. 16 and 17.

\response{- Simplify equation 3 removing dots and reporting $A^3 B$ instead of
$A^{n-1}B$ since the dimension of the system is 4. Moreover, variable $n$
is later used as the number of robots in the swarm.}
This has been changed.

\response{- In Section V would avoid the subdivision in subsections since they
are very short and in this case the subdivision does not help the flow
of reading.}
Quite right.  We changed these subdivisions to be inline paragraph headings.

	
	
	
	\Reviewer{\#1}\response{the paper is very interesting, well written and well organized. It presents an important research topic which is of great interest of most people interested in swarm robotics. The video is also very nice and useful to better understand the work.}
	Thank you!
	
	\response{What are the assumptions on the manipulated block properties? (Friction? Necessary force to move it? Is one robot enough to move it?)}
	This is now addressed in \S VI:
	``We assume Coulomb and viscous friction parameters such that the object can be moved by particle motion. Increasing the number of pushing particles increases the object speed.''
	
	  
	\response{Regarding the hybrid controller, what are the necessary assumptions to reach convergence? Are there practical assumptions to guarantee the claim (18) =$>$ (19)? How about the geometry of the environment? What happens if the environment is sparse so that corners are too far? Is it possible to control variance in this case?}
	We removed the discussion on Lyapunov stability, but now point out in \S IV-D that
	``The mean and variance of the swarm cannot be controlled simultaneously.
However, if the variance gained while moving from a corner to the target position is less than some $\sigma_{\rm{max}}^2-\sigma_{\rm{min}}^2$, we can adopt the hybrid, hysteresis-based controller shown in Alg.~1 to regulate the mean and variance.''
		
	\response{In section VI the authors should give more details regarding the Value Iteration approach. How did the authors set the probabilities p($x_j$ | x,u)? It seems it should be j instead of i in the loop "for i = ..." in (25).}
	We added text ``Our probabilistic motion model $p(x_j | x, \mathbf{u})$ assumed the object moved in the commanded direction $\mathbf{u}$ half of the time but $+45^\circ$ with probability 0.25 and $-45^\circ$ with probability 0.25.''
	Thank you. We are now using the same notation as Thrun et al.~[45] for the $i$ and $j$ on page 502.
		
	\response{It is also necessary to give more details of the potential fields in VI-b. The parameters $\Delta \rho$, $\rho$, b in (26) and (27) were not defined.}
	
	We rewrote section VI-B to define the parameters and explain the potential fields. This allowed us to simplify the notation. Each parameter is now defined.
	
	
	\response{In the outlier rejection, how are the regions computed?}
		In \S VI-B, we now explain,``The \emph{main} regions are generated by extending obstacles until they meet another obstacle. The \emph{transfer} regions are perpendicular to obstacle boundaries, and act as a buffer between two main regions.''
		
	\response{In algorithm 2, how is (29) applied? Is it used directly as $u_x$ and $u_y$? The composition of the potential field and the plan obtained with the value iteration algorithm should be better clarified.}
	We added equation (25), which is
	\begin{align}
	[x_{\rm{goal}}&, y_{\rm{goal}}] =  [\bar{x},\bar{y}]  + \frac{F_{\rm{pot}}}{\norm{F_{\rm{pot}}}}.\nonumber
\end{align}
		
	\response{In the simulations, what is the model for collisions? }
	We use a Javascript port called Box2D to calculate our physics. This has been clarified in \S V.

	\Reviewer{\#2}No comments were submitted from Reviewer 2.

	\Reviewer{\#3}\response{In the paper the terms: micro, nano robots, and particles are used interchangeably, that is perfectly fine, however, it would be better in the very beginning to make that clear possible with a footnote, especially the use of the term particles. }
	
	Good point. We have edited the paper so that references to micro and nano robots are only in the introduction, related work, and conclusion. We have replaced 
	``robot'' with ``particle'' unless the object to be controlled is a hardware robot (such as a kilobot).
	Additionally, in paragraph 1 we now state ``Instead, this paper treats the robots as particles that are steered by a global control signal broadcast to the entire population."
		
	\response{In page two, column 1, the authors state that "process noise cancels the differentiating effects... tens of robots." The term tens of robots is not clear. It would also help a citation if it exists.}
	This has been clarified by modifying text and adding references:
	``Similarly, our previous work focused on exploiting inhomogeneity between robots [16], [17]. These control algorithms theoretically apply to any number of robots, even robotic continuums. However, all these works never controlled more than twelve robots at a time because process noise cancels the differentiating effects of robot inhomogeneity. We desire control algorithms that extend to many thousands of robots.''
		
	\response{Throughout the paper citations [?] are used as nouns, while that is quite common practice the paper reads better when the authors are used. e.g. "[123] shows that..." instead use: "Joe and Bob [123] show that..."  }
	That is a good idea, but made the paper over the page limit.  Instead we have worked to minimize the number of times references are used as nouns.
		
	\response{When the walls are immovable then the proposed technique to push the swarm against a corner works as is demonstrated. In the case of the human body where the walls could be more elastic, or even permeable, how that would affect the proposed strategy.}
	How exciting! Elastic walls are a realm of soft robotics that our lab has just started modeling.  Unfortunately space constraints prevent us from addressing this in the current paper.
		
	\response{In the same line, if pushing against a "wall" could increase friction or even absorption of the transported medicine, have you consider a strategy that envelops the object with a small group of particles shielding the object from the walls?}
	Another worthy idea worth further investigation. We are unable to implement such an idea in the current iteration of this paper, but please see our recent IROS 2017 paper that investigates shaping swarms using boundary friction:
		{\bf Shiva Shahrokhi}, {\bf Arun Mahadev}, {\bf Aaron Becker} ``Algorithms for Shaping a Particle Swarm with a Shared Input by Exploiting Non-Slip Wall Contacts",  in IEEE/RSJ International Conference on Intelligent Robots and Systems (IROS), Vancouver, Canada, Sept. 28, 2017. 
	\href{	https://youtu.be/MxudWbNZdC4}{[video]}
		
	\response{The reviewer will recommend in simulation to create bigger more complex environments emulating the major veins or the digestive tract of the human body. Definitely something with curvy walls. }
	
	That is a good idea.  We added two additional maps for the simulation tests to this paper (Figs. 16 and 17). Our lab has several papers in progress using swarms in curved environments.
		
	\response{The paper, and in general the proposed approach, will gain by demonstrating the proposed approach in environments where there are junctions where the object has to be pushed in one of two, or more, options. }
	Also a good idea.  We added an E-shaped maze in (Figs. 16 and 17). Also see preliminary work in this direction in our recent IROS papers 
	
	{\bf Li Huang}, Louis Rogowski, MinJun Kim, {\bf Aaron Becker}. ``Path Planning and Aggregation for a Microrobot Swarm in Vascular Networks Using a Global Input'',  in IEEE/RSJ International Conference on Intelligent Robots and Systems (IROS), Vancouver, Canada, Sept. 28, 2017. 
	
and
	
 {\bf Arun Mahadev}, Dominik Michael Krupke, S{\'a}ndor Fekete, {\bf Aaron T. Becker}, ``Mapping and Coverage with a Particle Swarm Controlled by Uniform Inputs",  in IEEE/RSJ International Conference on Intelligent Robots and Systems (IROS), Vancouver, Canada, Sept. 28, 2017. 
		\href{https://youtu.be/77AaoEnd5b4}{[video]} 
	
	\response{Furthermore, it would be interesting to see if the proposed method will work in an open environment with multiple obstacles.}
	The current algorithm requires corners (see Alg. 2). 
	We would love to expand on our work in this fashion and are looking for collaborators to do so.

	\Reviewer{\#4}
	\response{One major concern is about the Lyapunov derivative in eq. (17) which looks wrong. I found $\dot{V}=2 \sigma \dot{\sigma} (\sigma^2-\sigma_{goal}^2)$. This demands to revise your justification as your result on variance stability conditions might be totally different. Please clarify. ... In eq. (17) how can be $\dot{\sigma}^2$ be negative? Please clarify.}
	
	Our Lyapunov controller was frivolous as it is obvious that the variance can be controlled. This section detracted from the paper as a whole and as a result was removed entirely.
		
	\response{The global control law is presented for holonomic robots, while in small-scales often particles obey nonholonomic motion. Is your approach still applicable? }
		
		The kilobots are nonholonomic, but the holonomic controller is still able to use them to manipulate the object.  \S VII-B now starts with ``Even though kilobots are nonholonomic, they performed five successful runs manipulating a hexagonal object through an obstacle maze. Videos of these runs are in Extension 2. These hardware experiments represent the results of over 100 hours of trials.''
		
	\response{Eq. (20) is a little bit vague. A clearer statement is required. Perhaps to say, eq. (20) is an extended version of eq. (11), which allows to control variance as well.}
	This has now been clarified in our paper:
	
	``Similar to the PD controller in Eq.~\eqref{eq:PDcontrolPosition} that controls the mean particle position, a controller to regulate the variance to $\sigma^2_{\rm{ref}}$ is:
\begin{align}
u_x &= K_{p}(x_{\rm{goal}}(\sigma^2_{\rm{ref}}) - \bar{x}) - K_{d}\bar{v}_x + K_{i}(\sigma^2_{\rm{ref}}-\sigma^2_{x}),   \nonumber \\
u_y &= K_{p}(y_{\rm{goal}}(\sigma^2_{\rm{ref}})  - \bar{y}) - K_{d}\bar{v}_y + K_{i}(\sigma^2_{\rm{ref}}-\sigma^2_{y}).  \nonumber
\end{align}
We call the gain scaling the variance error $K_i$ because the variance, if unregulated, integrates over time.''
	
			
	\response{Page 3 section 3 on the lesson list number 2, you have to define IID?}
	This issue has been remedied by defining IID as "independent and identically distributed".
		
	\response{Page 3 in section 3A, please follow paragraph style in the middle of the text.}
		We incorporated this sentence into the previous paragraph.
		
	\response{In section 3C and D, the writing can be improved to make it easier for general readership.}
		We rewrote \S III-C and D.
		
	\response{Correct the repetition (control control) on the last line on the left in page 5.}
	Corrected, the line now reads, ``There are several techniques for breaking the symmetry of the control input to allow controlling more states, \dots''.
		
\end{document}